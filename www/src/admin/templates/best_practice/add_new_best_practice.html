{% extends 'base.html' %}

{% block title %}
  Add New Best Practice
{% endblock %}

{% block content %}
  <link rel="stylesheet" href="{{ url_for('static', filename='admin/css/best_practice/add_bp.css') }}" />
  <div class="row">
    <!-- Sidebar -->
    <div class="col-2 sidebar" id="sidebar">
      <div class="d-flex align-items-center p-3 justify-content-between">
        <h4 class="text-center">OSAS</h4>
        <a href="#" class="toggle-sidebar menu-icon" onclick="toggleSidebar()"><i class="fas fa-step-backward text-white"></i></a>
      </div>
      {% include 'macros.html' %}
    </div>

    <!-- Main Content -->
    <div class="col-10 content-area p-0" style="flex-grow: 1; transition: width 0.3s ease-in-out; overflow: hidden;">
      {% include 'header.html' %}

      <!-- Include Font Awesome for icons -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

      <div class="container">
        <div class="page-header d-flex justify-content-between align-items-center">
          <div>
            <h1>Add New Best Practice</h1>
            <p>Create a new best practice configuration in the system</p>
          </div>
          <a href="{{ url_for('admin_route.best_practice_route.best_practice_management') }}" class="btn btn-outline-secondary back-btn"><i class="fas fa-arrow-left"></i> Back to Best Practices</a>
        </div>

        <!-- Form for adding new best practice -->
        <div class="form-container">
          <form id="addBestPracticeForm" method="POST" action="{{ url_for('admin_route.best_practice_route.add_new_best_practice') }}">
            {% if error %}
              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fas fa-exclamation-circle me-2"></i> {{ error }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endif %}

            <div class="card shadow rounded">
              <div class="card-body">
                <form id="addBestPracticeForm" method="get" action="{{ url_for('admin_route.best_practice_route.add_new_best_practice') }}">
                  <h5 class="mb-4">Best Practice Information</h5>

                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="BPDbVersion" class="form-label">DB Version <span class="text-danger">*</span></label>
                      <input type="text" class="form-control" id="BPDbVersion" name="BPDbVersion" placeholder="e.g., 19c" required />
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="BPParameter" class="form-label">Parameter <span class="text-danger">*</span></label>
                      <input type="text" class="form-control" id="BPParameter" name="BPParameter" placeholder="e.g., optimizer_mode" required />
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="BPParamDefaultValue" class="form-label">Default Value <span class="text-danger">*</span></label>
                      <input type="text" class="form-control" id="BPParamDefaultValue" name="BPParamDefaultValue" placeholder="e.g., ALL_ROWS" required />
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="BPParamRecommendValue" class="form-label">Recommended Value <span class="text-danger">*</span></label>
                      <input type="text" class="form-control" id="BPParamRecommendValue" name="BPParamRecommendValue" placeholder="e.g., CHOOSE" required />
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="BPForRacOnly" class="form-label">For RAC Only <span class="text-danger">*</span></label>
                      <select class="form-select" id="BPForRacOnly" name="BPForRacOnly" required>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                      </select>
                    </div>
                  </div>

                  <!-- Full width Notes field -->
                  <div class="mb-3">
                    <label for="BPNotes" class="form-label">Notes</label>
                    <textarea class="form-control" id="BPNotes" name="BPNotes" rows="4" placeholder="e.g., Meaning: Removes unused space"></textarea>
                  </div>

                  <div class="text-end mt-4">
                    <a href="{{ url_for('admin_route.best_practice_route.best_practice_management') }}" class="btn btn-outline-secondary me-2">Cancel</a>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-plus me-1"></i> Create</button>
                  </div>
                </form>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  {% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  {% endblock %}
{% endblock %}
