<link
	rel="stylesheet"
	href="{{ url_for('static', filename='user/css/header.css') }}" />

<!-- Header -->
<nav
	class="navbar navbar-expand-lg navbar-light bg-white shadow-sm px-4 py-2 mb-3">
	<div class="container-fluid align-items-center">
		<div class="dropdown me-3">
			<button
				class="btn btn-outline-secondary dropdown-toggle"
				type="button"
				id="customerDropdown"
				data-bs-toggle="dropdown"
				aria-expanded="false">
				Select Customer
			</button>
			<ul class="dropdown-menu" aria-labelledby="customerDropdown">
				{% if customers %} {% for customer in customers %}
				<li>
					<button
						class="dropdown-item customer-select-btn"
						type="button"
						data-cus-code="{{ customer.cus_code }}"
						data-cus-name="{{ customer.cus_name }}"
						value="{{ customer.cus_code }}">
						{{ customer.cus_name }}
					</button>
				</li>
				{% endfor %} {% else %}
				<li>
					<button class="dropdown-item disabled" type="button">
						No customers available
					</button>
				</li>
				{% endif %}
			</ul>
		</div>

		<!-- Dropdown 2: Database Selection (Initially hidden) -->
		<div class="dropdown" id="databaseDropdownContainer" style="display: none">
			<button
				class="btn btn-outline-secondary dropdown-toggle"
				type="button"
				id="databaseDropdown"
				data-bs-toggle="dropdown"
				aria-expanded="false">
				Select Database
			</button>
			<ul class="dropdown-menu" aria-labelledby="databaseDropdown">
				{% if AwrRepoInfo %} {% for Awr in AwrRepoInfo %}
				<li>
					<button
						class="dropdown-item database-select-btn"
						type="button"
						data-cus-code="{{ Awr.cus_code }}"
						data-db-name="{{ Awr.db_name }}"
						value="{{ Awr.cus_code }}">
						{{ Awr.db_name }}
					</button>
				</li>
				{% endfor %} {% else %}
				<li>
					<button class="dropdown-item disabled" type="button">
						No databases available
					</button>
				</li>
				{% endif %}
			</ul>
		</div>
		<!-- Các hành động trong header -->
		<div
			class="header-actions d-flex justify-content-end align-items-center gap-3 flex-grow-1">
			<!-- Avatar + Dropdown -->
			<div class="user-dropdown position-relative">
				<!-- Avatar -->
				<img
					src="https://i.pravatar.cc/40"
					class="rounded-circle avatar"
					width="32"
					height="32"
					alt="User"
					onclick="toggleDropdown()" />

              <!-- Dropdown -->
              <div class="dropdown-menu-custom" id="userDropdown">
                  <div class="user-info text-center py-3">
                      <img src="https://i.pravatar.cc/80" class="rounded-circle mb-2" width="60" height="60" alt="User">
                      <h6 class="mb-0">Jaydon Frankie</h6>
                      <p class="text-muted small">demo@minimals.cc</p>
                  </div>
                  <hr class="my-2">
                  <ul class="list-unstyled px-3">
                      <li><a href="/profile" class="text-decoration-none text-dark"><i class="fa fa-user me-2"></i>Profile</a></li>
                      <li><i class="fa fa-cog me-2"></i>Account settings</li>
                  </ul>
                  <div class="px-3 py-2">
                    <a href="/logout"><button class="btn btn-outline-danger w-100" onclick="return confirm('Are you sure about that ?')" >Logout</button></a>            
                  </div>
              </div>
            </div>

        </div>
    </div>
    <script>
      function toggleDropdown() {
          const dropdown = document.getElementById("userDropdown");
          dropdown.classList.toggle("show");
      }
      </script>      
</nav>
